
@{
    ViewBag.Title = "Administration";
}

<h2>Administración de solucion</h2>


<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Registrar empresa y usuario</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">

            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default">Login</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modalAddUserForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">Registrar empresa y usuario</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">

            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default">Login</button>
            </div>
        </div>
    </div>
</div>

<div class="text-center">
    <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#modalLoginForm">
        Adición de empresa
    </a>
    <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#modalAddUserForm">
        Crear usuario
    </a>
</div>


<table>
    <tbody>
        <tr>
            <td>Nombre</td>
            <td><input type="text" id="txtNombre" /></td>
        </tr>
        <tr>
            <td>RUC</td>
            <td><input type="text" id="txtRUC" /></td>
        </tr>
        <tr>
            <td></td>
            <td>-</td>
        </tr>

        <tr>
            <td></td>
            <td><input type="button" id="registrarEmpresa" /></td>
        </tr>
    </tbody>
</table>

<table>
    <tbody>
        <tr>
            <td>Nombre</td>
            <td><input type="text" id="txtUserName" /></td>
        </tr>
        <tr>
            <td>Usuario</td>
            <td><input type="text" id="txtUserLogin" /></td>
        </tr>
        <tr>
            <td>Clave</td>
            <td><input type="text" id="txtUserPassword" /></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="button" id="registerUser" /></td>
        </tr>
    </tbody>
</table>


<script>
    $("#registrarEmpresa").on("click", function () {
    if ($("#txtNombre").val().trim() == "" || $("#txtRUC").val().trim() == "") {
        alert("IMPOSIBLE CONTINUAR!!!!!!");
        return;
    }

    $.ajax({
        contentType: "application/json; charset=utf-8",
        type: "POST",
        url: "@Url.Action("addEmpresa", "Admin")",
        data: JSON.stringify( { nombre: $("#txtNombre").val(), ruc: $("#txtRUC").val()}),
        success: function (data) {
            if(data == 1)
            {

            }
            else {
                alert("Controller ");
            }
                     }
    });
    });


     $("#registerUser").on("click", function () {
    if ($("#txtUserName").val().trim() == "" || $("#txtuserLogin").val().trim() == "") {
        alert("IMPOSIBLE CONTINUAR!!!!!!");
        return;
    }

    $.ajax({
        contentType: "application/json; charset=utf-8",
        type: "POST",
        url: "@Url.Action("addUserCredentials", "Admin")",
        data: JSON.stringify( { username: $("#txtUserName").val(), userlogin: $("#txtuserLogin").val(), userpassword: $("#txtUserPassword").val()}),
        success: function (data) {
            if(data == 1)
            {

            }
            else {
                alert("Controller ");
            }
        }
    });
    });
</script>
